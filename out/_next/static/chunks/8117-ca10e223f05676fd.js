"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8117],{42050:function(e,t,l){l.d(t,{u:function(){return O},Z:function(){return P}});var a=l(85893),s=l(94054),n=l(11057),o=l(50480),i=l(72852),r=l(5306),c=l(50135),d=l(56815),u=l(69368),h=l(87536),m=l(67294),v=l(3813),g=l(47533),p=l(42298),f=l(86886),x=l(9198),b=l.n(x),j=l(92313),y=l(82229);let Z=e=>{let{label:t,value:l,onChange:s}=e,[n,o]=(0,m.useState)(new Date);return(0,a.jsx)(y.Z,{children:(0,a.jsx)(b(),{showYearDropdown:!0,showMonthDropdown:!0,showTimeSelect:!0,selected:n,dateFormat:"yyyy-MM-dd HH:mm:ss",timeFormat:"HH:mm",placeholderText:"MM-DD-YYYY",value:l,onChange:(e,t)=>{o(e),s(e,t)},customInput:(0,a.jsx)(j.Z,{label:t,style:{width:"100%"}}),showTimeInput:!0})})};var C=l(63730);let w=e=>{let{describedSchema:t,onSubmit:l,defaultValues:u,isDialog:x,gx:b,title:j,handleClose:y,schema:w}=e,{control:P,handleSubmit:k,formState:{errors:S},setValue:I}=(0,h.cI)({defaultValues:u,resolver:(0,g.X)(w)}),_=(0,h.qo)({control:P,name:"is_partner"});return(0,m.useEffect)(()=>{void 0!=_&&(t.fields.partner_company_id.meta.hidden=_)},[_]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("form",{onSubmit:k(l),style:{marginTop:"20px"},children:(0,a.jsxs)(f.ZP,{container:!0,spacing:6,sx:{justifyContent:"flex-start"},gap:5,children:[Object.keys(null==t?void 0:t.fields).map(e=>{var l,u,m,g,x,y;let w=t.fields[e];if(null==w?void 0:null===(l=w.meta)||void 0===l?void 0:l.hidden)return(0,a.jsx)(a.Fragment,{});let k=w.label;k||(k=(k=e.replaceAll("_"," ")).charAt(0).toUpperCase()+k.slice(1));let _=(null===(u=w.meta)||void 0===u?void 0:u.type)||v.H[w.type];return(null===(m=w.meta)||void 0===m?void 0:m.type)=="select"&&(w.oneOf=(null===(y=w.meta)||void 0===y?void 0:y.values)||["Select"]),"boolean"==w.type&&(w.oneOf=[{value:1,label:"YES"},{value:0,label:"NO"}]),(0,a.jsx)(f.ZP,{xs:b||(null==w?void 0:null===(g=w.meta)||void 0===g?void 0:g.sm)||12,gap:3,children:(0,a.jsxs)(s.Z,{fullWidth:!0,children:[(0,a.jsx)(h.Qr,{name:e,control:P,rules:{required:!0},render:t=>{var l,s,d;let{field:{value:u,onChange:h}}=t;if("file"==_)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Z,{variant:"outlined",fullWidth:!0,size:"medium",color:"primary",children:(0,a.jsxs)("label",{htmlFor:"user-view-".concat(j,"-").concat(e),style:{width:"100%",height:"100%",display:"flex",justifyContent:"start",alignItems:"center",cursor:"pointer"},children:[(0,a.jsx)(C.Z,{icon:"mdi:file"}),(0,a.jsx)("p",{style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",margin:"0 0 0 5px"},children:(null==u?void 0:u.name)||k})]})}),(0,a.jsx)("input",{type:"file",id:"user-view-".concat(j,"-").concat(e),hidden:!0,onChange:t=>{var l;let a=null===(l=t.target.files)||void 0===l?void 0:l[0];a&&I(e,a)},...null==w?void 0:null===(s=w.meta)||void 0===s?void 0:s.attr})]});if("switch"==_)return(0,a.jsx)(o.Z,{control:(0,a.jsx)(i.Z,{checked:u,onChange:t=>{I(e,t.target.checked)},inputProps:{"aria-label":"controlled"}}),label:null==w?void 0:w.label});try{if("select"==_)return(0,a.jsx)(r.Z,{options:[...w.oneOf],onChange:(t,l)=>{var a,s;I(e,"object"==typeof l?null==l?void 0:l.value:l),(null==w?void 0:null===(a=w.meta)||void 0===a?void 0:a.onChange)&&(null==w||null===(s=w.meta)||void 0===s||s.onChange(null==l?void 0:l.value))},getOptionLabel:e=>"object"==typeof e?e.label:e,value:w.oneOf.find(e=>e.value==u)||null,renderInput:e=>(0,a.jsx)(c.Z,{...e,label:k,size:"medium",onChange:e=>{var t;null===(t=w.meta)||void 0===t||t.onSearch(e.target.value)}}),disabled:w.meta.disable||!1})}catch(t){return console.error(e),(0,a.jsx)(a.Fragment,{})}return"datetime-local"===_||"date"==_?(0,a.jsx)(Z,{label:k,value:u,onChange:t=>{I(e,(0,p.default)(new Date(t),"yyyy-MM-dd HH:mm:ss"))}}):"multiselect"==_?(0,a.jsx)(O,{list:[...null===(d=w.meta)||void 0===d?void 0:d.values],label:k,onChange:t=>{I(e,t)}}):"switch"===_?(0,a.jsx)(o.Z,{required:!0,control:(0,a.jsx)(i.Z,{checked:u,onChange:t=>{I(e,t.target.checked)},"aria-label":k,inputProps:{"aria-label":"controlled"}}),label:null==w?void 0:w.label}):(0,a.jsx)(c.Z,{value:u,label:k,onChange:t=>{I(e,t.target.value)},type:_,disabled:(null===(l=w.meta)||void 0===l?void 0:l.disable)||!1,size:"medium"})}}),S[e]&&(0,a.jsx)(d.Z,{sx:{color:"error.main"},id:"validation-schema-first-name",children:null===(x=S[e])||void 0===x?void 0:x.message})]})},e)}),(0,a.jsxs)("div",{className:"cstm-schema-btn",children:[!x&&(0,a.jsx)(n.Z,{variant:"contained",type:"submit",className:"btn-primary",children:"Submit"}),(0,a.jsx)(n.Z,{variant:"outlined",color:"inherit",type:"button",onClick:y,children:"Cancel"})]})]},j)})})};var P=w;let k=(0,a.jsx)(C.Z,{icon:"mdi:checkbox-blank-outline"}),S=(0,a.jsx)(C.Z,{icon:"mdi:checkbox-marked-outline"}),O=e=>{let{list:t,value:l,onChange:s,label:n}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(r.Z,{multiple:!0,id:"checkboxes-tags-demo",options:t,disableCloseOnSelect:!0,value:t.filter(e=>l.includes(e.value)),getOptionLabel:e=>e.label,onChange:(e,t)=>{s(t)},renderOption:(e,t,l)=>{let{selected:s}=l,{key:n,...o}=e;return(0,a.jsxs)("li",{...o,children:[(0,a.jsx)(u.Z,{icon:k,checkedIcon:S,style:{marginRight:8},checked:s}),t.label]},n)},style:{maxWidth:500},renderInput:e=>(0,a.jsx)(c.Z,{...e,label:n,size:"medium"})})})}},3813:function(e,t,l){l.d(t,{H:function(){return a}});let a={string:"text",email:"email",number:"number",date:"date","datetime-local":"datetime-local"}},44308:function(e,t,l){let a;var s=l(64529),n=l(782),o=l(55277),i=l(86501),r=l(7688);let c="/courses",d=(0,s.Ue)((0,n.$e)({course:{id:null,list:[],total:0,page:1,size:10,search:null,paginate:!0,chats:[],selectedChat:{}}},(e,t)=>({get:{list:async()=>{let{course:{page:l,size:a,search:s,paginate:n}}=t();i.ZP.promise(o.ZP.get(c,{query:{page:l,limit:a,search:s}}),{loading:"fetching...",success:t=>(console.log("res",t),e(e=>{var l;return{course:{...e.course,list:null==t?void 0:t.data.courses,total:null==t?void 0:null===(l=t.data)||void 0===l?void 0:l.metaData.total}}}),(null==t?void 0:t.message)||"fetched"),error:e=>e})},paginate:t=>{let{page:l,size:s,search:n,paginate:o}=t;e(e=>({course:{...e.course,search:n||""}})),clearTimeout(a);let i=()=>{e(e=>({course:{...e.course,page:l||e.course.page,size:s||e.course.size,search:n||e.course.search,paginate:null==o||o}})),d.getState().get.list()};if(n){a=setTimeout(()=>{i()},1e3),e(e=>({course:{...e.course,search:n}}));return}i()},chats:async t=>{var l;let a=null===(l=(0,r.P)())||void 0===l?void 0:l.id;i.ZP.promise(o.ZP.post("/chat/course",{courseId:t,adminId:a}),{loading:"",success:t=>(console.log("res",t),e(e=>({course:{...e.course,chats:t.data}})),""),error:t=>(e(e=>({course:{...e.course,loading:!1}})),t)})}},selectChat:t=>{e(e=>({course:{...e.course,selectedChat:e.course.chats.find(e=>(null==e?void 0:e.chat._id)==t)}}))},refreshChat:async e=>{var l,a;null===(l=(0,r.P)())||void 0===l||l.id;let s=null===(a=t().course.selectedChat)||void 0===a?void 0:a.chat._id;await d.getState().get.chats(e),await d.getState().selectChat(s)},sendChat:l=>{var a,s;let n=null===(a=(0,r.P)())||void 0===a?void 0:a.id,c=null===(s=t().course.selectedChat)||void 0===s?void 0:s.chat._id;i.ZP.promise(o.ZP.post("/chat/send",{chatId:c,message:l,senderId:n}),{loading:"Sending message...",success:t=>(console.log("res",t),e(e=>({course:{...e.course,selectedChat:{...e.course.selectedChat,chat:{...e.course.selectedChat.chat,messages:[...e.course.selectedChat.chat.messages,t.data]}}}})),"Message sent"),error:e=>e})},select:t=>e(e=>({course:{...e.course,id:t}})),add:async e=>{let l=t().course.id,a=i.ZP.promise(l?o.ZP.patch("".concat(c,"/").concat(l),e,{formData:!0}):o.ZP.post("".concat(c,"/register"),e,{formData:!0}),{loading:l?"Updating":"Adding",success:e=>(d.getState().get.paginate({}),null==e?void 0:e.message),error:e=>e});return a},delete:async()=>{let e=t().course.id;if(!e)return i.ZP.error("Please select a item");i.ZP.promise(o.ZP.del("".concat(c,"/").concat(e)),{loading:"deleting",success:e=>(d.getState().get.paginate({}),null==e?void 0:e.message),error:e=>e})}})));t.Z=d},92313:function(e,t,l){var a=l(85893),s=l(67294),n=l(50135);let o=(0,s.forwardRef)((e,t)=>{let{...l}=e,{label:s,readOnly:o,style:i}=l;return(0,a.jsx)(n.Z,{inputRef:t,...l,...i&&{style:i},label:s||"",...o&&{inputProps:{readOnly:!0}}})});t.Z=o}}]);