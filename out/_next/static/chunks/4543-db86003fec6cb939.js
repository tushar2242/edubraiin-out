"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4543],{3813:function(e,t,i){i.d(t,{H:function(){return a}});let a={string:"text",email:"email",number:"number",date:"date","datetime-local":"datetime-local"}},94068:function(e,t,i){let a;var n=i(64529),l=i(782),r=i(55277),s=i(86501);let o="/roles",d=(0,n.Ue)((0,l.$e)({role:{id:null,list:[],total:0,page:1,size:10,search:null,paginate:!0,detail:void 0,isUser:!1}},(e,t)=>({get:{list:async()=>{let{role:{page:i,size:a,search:n,paginate:l}}=t();s.ZP.promise(r.ZP.get(o,{query:{page:i,size:a,search:n,paginate:l?"YES":"NO"}}),{loading:"fetching...",success:t=>(console.log("res: ",t),e(e=>{var i;return{role:{...e.role,list:l?null==t?void 0:t.data:t,total:null==t?void 0:null===(i=t.meta)||void 0===i?void 0:i.total}}}),(null==t?void 0:t.message)||"fetched"),error:e=>e})},paginate:t=>{let{page:i,size:n,search:l,paginate:r}=t;e(e=>({role:{...e.role,search:l||""}})),clearTimeout(a);let s=()=>{e(e=>({role:{...e.role,page:i||e.role.page,size:n||e.role.size,search:l||e.role.search,paginate:null==r||r}})),d.getState().get.list()};if(l){a=setTimeout(()=>{s()},1e3),e(e=>({role:{...e.role,search:l}}));return}s()},detail:async(t,i,a)=>{e(e=>({...e,role:{...e.role,detail:i,id:null==i?void 0:i.id,isUser:!!a}}))}},select:t=>e(e=>({role:{...e.role,id:t}})),add:async e=>{let i=t().role.id,a=t().role.isUser;s.ZP.promise(i?r.ZP.put("".concat(o,"/").concat(i).concat(a?"/update-user-permission":""),a?{permissions:e.permissions}:e):r.ZP.post(o,e),{loading:i?"Updating":"Adding",success:e=>(d.getState().get.paginate({}),null==e?void 0:e.message),error:e=>e})},delete:async()=>{let e=t().role.id;if(!e)return s.ZP.error("No plan to delete");s.ZP.promise(r.ZP.del("".concat(o,"/").concat(e)),{loading:"deleting",success:e=>(d.getState().get.paginate({}),null==e?void 0:e.message),error:e=>e})}})));t.Z=d},74543:function(e,t,i){let a;i.d(t,{Z:function(){return X}});var n=i(85893),l=i(67294),r=i(41664),s=i.n(r),o=i(87357),d=i(86886),c=i(66242),m=i(34386),p=i(90948),u=i(18972),g=i(50135),h=i(93946),x=i(15861),v=i(94054),Z=i(18360),f=i(78818),j=i(63730);i(66114);var y=i(82229),b=i(11057),S=i(50657),C=i(37645),z=i(6514),P=i(58951),w=i(5306),k=i(56815),O=i(31425),_=i(60155),E=i(16310),N=i(87536),W=i(47533),D=i(3813),A=i(10065),M=i(64529),R=i(782),q=i(55277),U=i(86501);let I="/admins",L=(0,M.Ue)((0,R.$e)({admin:{id:null,list:[],total:0,page:1,size:10,search:null,paginate:!0}},(e,t)=>({get:{list:async()=>{let{admin:{page:i,size:a,search:n,paginate:l}}=t();U.ZP.promise(q.ZP.get(I,{query:{page:i,size:a,search:n,paginate:l?"YES":"NO"}}),{loading:"fetching...",success:t=>(e(e=>{var i;return{admin:{...e.admin,list:l?null==t?void 0:t.data:t,total:null==t?void 0:null===(i=t.meta)||void 0===i?void 0:i.total}}}),(null==t?void 0:t.message)||"fetched"),error:e=>e})},paginate:t=>{let{page:i,size:n,search:l,paginate:r}=t;e(e=>({admin:{...e.admin,search:l||""}})),clearTimeout(a);let s=()=>{e(e=>({admin:{...e.admin,page:i||e.admin.page,size:n||e.admin.size,search:l||e.admin.search,paginate:null==r||r}})),L.getState().get.list()};if(l){a=setTimeout(()=>{s()},1e3),e(e=>({admin:{...e.admin,search:l}}));return}s()}},select:t=>e(e=>({admin:{...e.admin,id:t}})),add:async e=>{let i=t().admin.id;U.ZP.promise(i?q.ZP.put("".concat(I,"/").concat(i),e):q.ZP.post(I,e),{loading:i?"Updating":"Adding",success:e=>(L.getState().get.paginate({}),null==e?void 0:e.message),error:e=>e})},delete:async()=>{let e=t().admin.id;if(!e)return U.ZP.error("No plan to delete");U.ZP.promise(q.ZP.del("".concat(I,"/").concat(e)),{loading:"deleting",success:e=>(L.getState().get.paginate({}),null==e?void 0:e.message),error:e=>e})}})));var T=i(42298),F=i(72990),H=i(94068);(0,p.ZP)(s())(e=>{let{theme:t}=e;return{textDecoration:"none",color:t.palette.primary.main}});let Y=e=>(0,n.jsx)(_.Z,{skin:"light",color:"primary",sx:{mr:3,width:30,height:30,fontSize:".875rem"},children:(0,F.Q)(e.name?e.name:"John Doe")}),Q=[{flex:.1,field:"name",minWidth:80,headerName:"name",renderCell:e=>{let{row:t}=e;return(0,n.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center"},children:[Y(t),(0,n.jsxs)(o.Z,{sx:{display:"flex",alignItems:"flex-start",flexDirection:"column"},children:[(0,n.jsx)(x.Z,{noWrap:!0,variant:"body2",component:s(),href:"/apps/user/view/overview/",sx:{fontWeight:600,color:"text.primary",textDecoration:"none","&:hover":{color:"primary.main"}},children:null==t?void 0:t.name}),(0,n.jsx)(x.Z,{noWrap:!0,variant:"caption",children:t.email})]})]})}},{flex:.1,minWidth:90,field:"role_id",headerName:"Role",renderCell:e=>{var t;let{row:i}=e;return(0,n.jsx)(x.Z,{variant:"body2",children:null===(t=i.role)||void 0===t?void 0:t.name})}},{flex:.1,minWidth:90,field:"created_at",headerName:"Created At",renderCell:e=>{let{row:t}=e;return(0,n.jsx)(x.Z,{variant:"body2",children:(0,T.default)(new Date(t.created_at),"dd MMM yyyy hh:mm:ss")})}},{flex:.1,minWidth:90,field:"updated_at",headerName:"Last updated",renderCell:e=>{let{row:t}=e;return(0,n.jsx)(x.Z,{variant:"body2",children:(0,T.default)(new Date(t.updated_at),"dd MMM yyyy hh:mm:ss")})}}],V=E.Ry().shape({name:E.Z_().label("Name").required(),email:E.Z_().label("Email").required(),password:E.Z_().label("Password").required(),role_id:E.Rx().label("Role").meta({type:"select"}).required()}),$=V.getDefault(),G=V.describe(),J=()=>{var e;let t="User",[i,a]=(0,l.useState)(!1),[r,s]=(0,l.useState)({page:0,pageSize:10}),p={ROLE:{game:E.Rx().label("Game").required()}},[x,_]=(0,l.useState)(!1),[M,R]=(0,l.useState)(),[q,U]=(0,l.useState)(),[I,T]=(0,l.useState)(),F=L(),Y=(0,H.Z)();(0,A.Z)();let{control:J,handleSubmit:X,formState:{errors:B},getValues:K,setValue:ee,reset:et}=(0,N.cI)({defaultValues:$,mode:"onChange",resolver:(0,W.X)(V)});(0,l.useEffect)(()=>{F.get.paginate({size:10,page:1}),Y.get.paginate({paginate:!1})},[]);let ei=e=>{F.get.paginate({search:e})},ea=e=>{e&&(et(),F.select(null)),a(!0)},en=()=>a(!1),el=()=>{let e=E.Ry().shape(p.ROLE);R(e),U(e.describe()),T(e.getDefault()),_(!0)},er=[...Q,{flex:.1,minWidth:130,sortable:!1,field:"actions",headerName:"Actions",renderCell:e=>{let{row:i}=e;return(0,n.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,n.jsx)(m.Z,{title:"Edit ".concat(t),children:(0,n.jsx)(h.Z,{size:"small",onClick:()=>{for(let e in $)ee(e,i[e]),ea();F.select(null==i?void 0:i.id)},children:(0,n.jsx)(j.Z,{icon:"mdi:edit-outline",fontSize:20})})}),(0,n.jsx)(m.Z,{title:"Delete ".concat(t),children:(0,n.jsx)(h.Z,{size:"small",onClick:()=>{F.select(null==i?void 0:i.id),F.delete()},children:(0,n.jsx)(j.Z,{icon:"mdi:delete-outline",fontSize:20})})}),(0,n.jsx)(m.Z,{title:"Copy ".concat(t),children:(0,n.jsx)(h.Z,{size:"small",onClick:()=>{for(let e in $)ee(e,i[e]),ea()},children:(0,n.jsx)(j.Z,{icon:"mdi:content-copy",fontSize:20})})}),(0,n.jsx)(m.Z,{title:"Add New Permission",children:(0,n.jsx)(h.Z,{size:"small",onClick:()=>{Y.get.detail(null==i?void 0:i.id,i,!0),el()},children:(0,n.jsx)(j.Z,{icon:"mdi:key-plus",fontSize:20})})})]})}}],es=async()=>{let e=K();await F.add(e),en()};return(0,n.jsxs)(y.Z,{children:[(0,n.jsx)(d.ZP,{container:!0,spacing:6,children:(0,n.jsxs)(d.ZP,{item:!0,xs:12,children:[(0,n.jsxs)(c.Z,{children:[(0,n.jsxs)(o.Z,{sx:{p:5,pb:3,width:"100%",display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},children:[(0,n.jsxs)(Z.Z,{size:"small",displayEmpty:!0,defaultValue:"",sx:{mr:4,mb:2},disabled:!0,renderValue:e=>0===e.length?"Actions":e,children:[(0,n.jsx)(u.Z,{disabled:!0,children:"Actions"}),(0,n.jsx)(u.Z,{value:"Delete",children:"Delete"}),(0,n.jsx)(u.Z,{value:"Edit",children:"Edit"}),(0,n.jsx)(u.Z,{value:"Send",children:"Send"})]}),(0,n.jsxs)(o.Z,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center"},children:[(0,n.jsx)(g.Z,{size:"small",sx:{mr:4,mb:2},placeholder:"Search ".concat(t),onChange:e=>ei(e.target.value)}),(0,n.jsxs)(b.Z,{sx:{mb:2},variant:"contained",onClick:()=>{ea(!0)},children:["Create ",t]})]})]}),(0,n.jsx)(f._,{autoHeight:!0,pagination:!0,rows:F.admin.list,columns:er,disableRowSelectionOnClick:!0,pageSizeOptions:[10,25,50],paginationMode:"server",paginationModel:{page:F.admin.page-1,pageSize:F.admin.size},onPaginationModelChange:e=>{let{page:t,pageSize:i}=e;(t!=F.admin.page-1||i!=F.admin.size)&&F.get.paginate({page:t+1,size:i})},onColumnOrderChange:e=>{console.log("e: ",e)},rowCount:F.admin.total})]}),(0,n.jsxs)(S.Z,{open:i,onClose:en,"aria-labelledby":"user-view-edit","aria-describedby":"user-view-edit-description",sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650}},children:[(0,n.jsxs)(C.Z,{id:"user-view-edit",sx:{textAlign:"center",fontSize:"1.5rem !important",px:e=>["".concat(e.spacing(5)," !important"),"".concat(e.spacing(15)," !important")],pt:e=>["".concat(e.spacing(8)," !important"),"".concat(e.spacing(12.5)," !important")]},children:[(null===(e=F.admin)||void 0===e?void 0:e.id)?"Edit":"Add"," ",t]}),(0,n.jsxs)(z.Z,{sx:{pb:e=>"".concat(e.spacing(8)," !important"),px:e=>["".concat(e.spacing(5)," !important"),"".concat(e.spacing(15)," !important")]},children:[(0,n.jsx)(P.Z,{variant:"body2",id:"user-view-edit-description",sx:{textAlign:"center",mb:7}}),(0,n.jsx)("form",{onSubmit:X(es),children:(0,n.jsx)(d.ZP,{container:!0,spacing:6,children:Object.keys(G.fields).map(e=>{var t,i,a;let l=G.fields[e];if(null==l?void 0:null===(t=l.meta)||void 0===t?void 0:t.hidden)return(0,n.jsx)(n.Fragment,{});let r=l.label,s=D.H[l.type];return(null===(i=l.meta)||void 0===i?void 0:i.type)=="select"&&"role_id"==e&&(l.oneOf=Y.role.list.map(e=>({value:e.id,label:e.name}))),"boolean"==l.type&&(l.oneOf=[{value:1,label:"YES"},{value:0,label:"NO"}]),(0,n.jsx)(d.ZP,{item:!0,xs:12,sm:12,children:(0,n.jsxs)(v.Z,{fullWidth:!0,children:[(0,n.jsx)(N.Qr,{name:e,control:J,rules:{required:!0},render:t=>{let{field:{value:i,onChange:a}}=t;try{if(l.oneOf.length)return(0,n.jsx)(w.Z,{options:[...l.oneOf],onChange:(t,i)=>{ee(e,"object"==typeof i?null==i?void 0:i.value:i)},getOptionLabel:e=>"object"==typeof e?e.label:e,value:l.oneOf.find(e=>e.value==i)||i,renderInput:e=>(0,n.jsx)(g.Z,{...e,label:r})})}catch(t){return console.error(e),(0,n.jsx)(n.Fragment,{})}return(0,n.jsx)(g.Z,{value:i,label:r,onChange:a,type:s,error:!!B[e]})}}),B[e]&&(0,n.jsx)(k.Z,{sx:{color:"error.main"},id:"validation-schema-first-name",children:null===(a=B[e])||void 0===a?void 0:a.message})]})})})})})]}),(0,n.jsxs)(O.Z,{sx:{justifyContent:"center",px:e=>["".concat(e.spacing(5)," !important"),"".concat(e.spacing(15)," !important")],pb:e=>["".concat(e.spacing(8)," !important"),"".concat(e.spacing(12.5)," !important")]},children:[(0,n.jsx)(b.Z,{variant:"contained",sx:{mr:2},onClick:X(es),children:"Submit"}),(0,n.jsx)(b.Z,{variant:"outlined",color:"secondary",onClick:en,children:"Cancel"})]})]})]})}),(0,n.jsx)(n.Fragment,{})]})};var X=J}}]);