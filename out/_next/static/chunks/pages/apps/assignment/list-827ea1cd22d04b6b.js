(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1585],{58951:function(e,t,i){"use strict";i.d(t,{Z:function(){return v}});var n=i(63366),a=i(87462),s=i(67294),r=i(86010),l=i(58510),o=i(90948),d=i(71657),c=i(15861),u=i(1977),g=i(8027);function p(e){return(0,g.ZP)("MuiDialogContentText",e)}(0,u.Z)("MuiDialogContentText",["root"]);var m=i(85893);let f=["children","className"],Z=e=>{let{classes:t}=e,i=(0,l.Z)({root:["root"]},p,t);return(0,a.Z)({},t,i)},x=(0,o.ZP)(c.Z,{shouldForwardProp:e=>(0,o.FO)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),h=s.forwardRef(function(e,t){let i=(0,d.Z)({props:e,name:"MuiDialogContentText"}),{className:s}=i,l=(0,n.Z)(i,f),o=Z(l);return(0,m.jsx)(x,(0,a.Z)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:l,className:(0,r.Z)(o.root,s)},i,{classes:o}))});var v=h},6514:function(e,t,i){"use strict";i.d(t,{Z:function(){return v}});var n=i(63366),a=i(87462),s=i(67294),r=i(86010),l=i(58510),o=i(90948),d=i(71657),c=i(1977),u=i(8027);function g(e){return(0,u.ZP)("MuiDialogContent",e)}(0,c.Z)("MuiDialogContent",["root","dividers"]);var p=i(4472),m=i(85893);let f=["className","dividers"],Z=e=>{let{classes:t,dividers:i}=e;return(0,l.Z)({root:["root",i&&"dividers"]},g,t)},x=(0,o.ZP)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,i.dividers&&t.dividers]}})(({theme:e,ownerState:t})=>(0,a.Z)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},t.dividers?{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}:{[`.${p.Z.root} + &`]:{paddingTop:0}})),h=s.forwardRef(function(e,t){let i=(0,d.Z)({props:e,name:"MuiDialogContent"}),{className:s,dividers:l=!1}=i,o=(0,n.Z)(i,f),c=(0,a.Z)({},i,{dividers:l}),u=Z(c);return(0,m.jsx)(x,(0,a.Z)({className:(0,r.Z)(u.root,s),ownerState:c,ref:t},o))});var v=h},37645:function(e,t,i){"use strict";var n=i(87462),a=i(63366),s=i(67294),r=i(86010),l=i(58510),o=i(15861),d=i(90948),c=i(71657),u=i(4472),g=i(34182),p=i(85893);let m=["className","id"],f=e=>{let{classes:t}=e;return(0,l.Z)({root:["root"]},u.a,t)},Z=(0,d.ZP)(o.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),x=s.forwardRef(function(e,t){let i=(0,c.Z)({props:e,name:"MuiDialogTitle"}),{className:l,id:o}=i,d=(0,a.Z)(i,m),u=f(i),{titleId:x=o}=s.useContext(g.Z);return(0,p.jsx)(Z,(0,n.Z)({component:"h2",className:(0,r.Z)(u.root,l),ownerState:i,ref:t,variant:"h6",id:null!=o?o:x},d))});t.Z=x},4472:function(e,t,i){"use strict";i.d(t,{a:function(){return s}});var n=i(1977),a=i(8027);function s(e){return(0,a.ZP)("MuiDialogTitle",e)}let r=(0,n.Z)("MuiDialogTitle",["root"]);t.Z=r},61480:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/apps/assignment/list",function(){return i(40707)}])},40707:function(e,t,i){"use strict";let n;i.r(t),i.d(t,{default:function(){return E}});var a=i(85893),s=i(67294),r=i(87357),l=i(86886),o=i(66242),d=i(34386),c=i(18972),u=i(50135),g=i(93946),p=i(18360),m=i(78818),f=i(63730),Z=i(82229),x=i(11057),h=i(50657),v=i(37645),w=i(6514),b=i(58951),j=i(16310),C=i(87536),_=i(47533),D=i(11163),S=i(44308),P=i(64529),y=i(782),N=i(55277),z=i(86501);let M="/assignment",T=(0,P.Ue)((0,y.$e)({assign:{id:null,list:[],total:0,page:1,size:10,search:null,paginate:!0}},(e,t)=>({get:{list:async()=>{let{assign:{page:i,size:n,search:a,paginate:s}}=t();z.ZP.promise(N.ZP.get(M,{query:{page:i,limit:n,search:a}}),{loading:"fetching...",success:t=>(console.log("res",t),e(e=>{var i;return{assign:{...e.assign,list:null==t?void 0:null===(i=t.data)||void 0===i?void 0:i.data,total:null==t?void 0:t.data.meta.total}}}),(null==t?void 0:t.message)||"fetched"),error:e=>e})},paginate:t=>{let{page:i,size:a,search:s,paginate:r}=t;e(e=>({assign:{...e.assign,search:s||""}})),clearTimeout(n);let l=()=>{e(e=>({assign:{...e.assign,page:i||e.assign.page,size:a||e.assign.size,search:s||e.assign.search,paginate:null==r||r}})),T.getState().get.list()};if(s){n=setTimeout(()=>{l()},1e3),e(e=>({assign:{...e.assign,search:s}}));return}l()}},select:t=>e(e=>({assign:{...e.assign,id:t}})),add:async e=>{let i=t().assign.id,n=z.ZP.promise(i?N.ZP.put("".concat(M,"/").concat(i),e,{formData:!0}):N.ZP.post("".concat(M,"/create"),e,{formData:!0}),{loading:i?"Updating":"Adding",success:e=>(T.getState().get.paginate({}),null==e?void 0:e.message),error:e=>e});return n},delete:async()=>{let e=t().assign.id;if(!e)return z.ZP.error("Please select a item");z.ZP.promise(N.ZP.del("".concat(M,"/").concat(e)),{loading:"deleting",success:e=>(T.getState().get.paginate({}),null==e?void 0:e.message),error:e=>e})}})));var A=i(42050);let R=e=>{var t;let{read:i,write:n,update:P,del:y}=e,N="Assignment",z=(0,S.Z)(),M={_id:j.Z_().nullable().meta({hidden:!0}),assignment_name:j.Z_().required("Assignment name is required"),questions:j.Z_().nullable().default(""),file:j.nK().nullable().meta({type:"file"}),createdAt:j.hT().nullable().meta({hidden:!0}),courseId:j.Z_().required("Course is required").meta({type:"select",values:z.course.list.map(e=>({value:e._id,label:e.course_name}))})},R=j.Ry().shape(M),[E,q]=(0,s.useState)(!1),I=T(),[W,k]=(0,s.useState)(R.getDefault()),[O,$]=(0,s.useState)(R.describe()),{control:F,handleSubmit:G,formState:{errors:U},getValues:V,setValue:X,reset:H}=(0,C.cI)({defaultValues:W,mode:"onChange",resolver:(0,_.X)(R)});(0,s.useEffect)(()=>{I.get.paginate({size:10,page:1}),z.get.paginate({size:30,page:1})},[]);let Y=e=>{I.get.paginate({search:e})},B=async(e,t)=>{if(e)k(R.getDefault()),$(R.describe()),H(),I.select(null);else{let e=R.getDefault();for(let i in k(e),$(R.describe()),e)X(i,t[i])}q(!0)},K=()=>{q(!1)},L=[{field:"assignment_name",headerName:"Assignment Name",minWidth:200,flex:.3},{field:"questions",headerName:"Total Questions",minWidth:150,flex:.2,valueGetter:e=>{var t;return(null===(t=e.row.questions)||void 0===t?void 0:t.length)||0}},{field:"file_details",headerName:"Has File",minWidth:120,flex:.15,valueGetter:e=>{var t;return(null===(t=e.row.file_details)||void 0===t?void 0:t.fileUrl)?"Yes":"No"}},{field:"createdAt",headerName:"Created At",minWidth:180,flex:.2,valueGetter:e=>e.row.createdAt?new Date(e.row.createdAt).toLocaleDateString():"-"},{field:"courseId",headerName:"Course ID",minWidth:200,flex:.3},{flex:.1,minWidth:130,sortable:!1,field:"actions",headerName:"Actions",renderCell:e=>{let{row:t}=e;return(0,a.jsxs)(r.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,a.jsx)(d.Z,{title:"Edit ".concat(N),children:(0,a.jsx)(g.Z,{size:"small",onClick:()=>{for(let e in W)I.select(null==t?void 0:t.id),X(e,t[e]);B(!1,t)},children:(0,a.jsx)(f.Z,{icon:"mdi:edit-outline",fontSize:20})})}),(0,a.jsx)(d.Z,{title:"Delete ".concat(N),children:(0,a.jsx)(g.Z,{size:"small",onClick:()=>{I.select(null==t?void 0:t._id),I.delete()},children:(0,a.jsx)(f.Z,{icon:"mdi:delete-outline",fontSize:20})})})]})}}],Q=async e=>{let t={...e};t.quesitons=[e.questions],await I.add(e),K()};return(0,D.useRouter)(),f.Z,f.Z,(0,a.jsx)(Z.Z,{children:(0,a.jsx)(l.ZP,{container:!0,spacing:6,children:(0,a.jsxs)(l.ZP,{item:!0,xs:12,children:[(0,a.jsxs)(o.Z,{children:[(0,a.jsxs)(r.Z,{sx:{p:5,pb:3,width:"100%",display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},children:[(0,a.jsxs)(p.Z,{size:"small",displayEmpty:!0,defaultValue:"",sx:{mr:4,mb:2},disabled:!0,renderValue:e=>0===e.length?"Actions":e,children:[(0,a.jsx)(c.Z,{disabled:!0,children:"Actions"}),(0,a.jsx)(c.Z,{value:"Delete",children:"Delete"}),(0,a.jsx)(c.Z,{value:"Edit",children:"Edit"}),(0,a.jsx)(c.Z,{value:"Send",children:"Send"})]}),(0,a.jsxs)(r.Z,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center"},children:[(0,a.jsx)(u.Z,{size:"small",sx:{mr:4,mb:2},placeholder:"Search ".concat(N),onChange:e=>Y(e.target.value)}),(0,a.jsxs)(x.Z,{sx:{mb:2},variant:"contained",onClick:()=>{B(!0)},children:["Create ",N]})]})]}),(0,a.jsx)(m._,{autoHeight:!0,pagination:!0,rows:I.assign.list,columns:L,getRowId:e=>e._id,disableRowSelectionOnClick:!0,pageSizeOptions:[10,25,50],paginationMode:"server",paginationModel:{page:I.assign.page-1,pageSize:I.assign.size},onPaginationModelChange:e=>{let{page:t,pageSize:i}=e;(t!=I.assign.page-1||i!=I.assign.size)&&I.get.paginate({page:t+1,size:i})},onColumnOrderChange:e=>{console.log("e: ",e)},rowCount:I.assign.total})]}),(0,a.jsxs)(h.Z,{open:E,onClose:K,"aria-labelledby":"user-view-edit","aria-describedby":"user-view-edit-description",sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650}},children:[(0,a.jsxs)(v.Z,{id:"user-view-edit",sx:{textAlign:"center",fontSize:"1.5rem !important",px:e=>["".concat(e.spacing(5)," !important"),"".concat(e.spacing(15)," !important")],pt:e=>["".concat(e.spacing(8)," !important"),"".concat(e.spacing(12.5)," !important")]},children:[(null===(t=I.assign)||void 0===t?void 0:t.id)?"Edit":"Add"," ",N]}),(0,a.jsxs)(w.Z,{sx:{pb:e=>"".concat(e.spacing(8)," !important"),px:e=>["".concat(e.spacing(5)," !important"),"".concat(e.spacing(15)," !important")]},children:[(0,a.jsx)(b.Z,{variant:"body2",id:"user-view-edit-description",sx:{textAlign:"center",mb:7}}),(0,a.jsx)(A.Z,{describedSchema:O,onSubmit:Q,title:"assingment",handleClose:K,schema:R,defaultValues:W})]})]})]})})})};R.moduleId=3,R.gameIds=[1,2];var E=R},459:function(){}},function(e){e.O(0,[4386,7536,2216,3863,9198,7693,8818,2229,8117,9774,2888,179],function(){return e(e.s=61480)}),_N_E=e.O()}]);