(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3311],{31425:function(e,t,i){"use strict";i.d(t,{Z:function(){return x}});var r=i(63366),a=i(87462),n=i(67294),o=i(86010),s=i(58510),l=i(90948),c=i(71657),d=i(1977),u=i(8027);function p(e){return(0,u.ZP)("MuiDialogActions",e)}(0,d.Z)("MuiDialogActions",["root","spacing"]);var g=i(85893);let m=["className","disableSpacing"],h=e=>{let{classes:t,disableSpacing:i}=e;return(0,s.Z)({root:["root",!i&&"spacing"]},p,t)},f=(0,l.ZP)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,!i.disableSpacing&&t.spacing]}})(({ownerState:e})=>(0,a.Z)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})),v=n.forwardRef(function(e,t){let i=(0,c.Z)({props:e,name:"MuiDialogActions"}),{className:n,disableSpacing:s=!1}=i,l=(0,r.Z)(i,m),d=(0,a.Z)({},i,{disableSpacing:s}),u=h(d);return(0,g.jsx)(f,(0,a.Z)({className:(0,o.Z)(u.root,n),ownerState:d,ref:t},l))});var x=v},58951:function(e,t,i){"use strict";i.d(t,{Z:function(){return Z}});var r=i(63366),a=i(87462),n=i(67294),o=i(86010),s=i(58510),l=i(90948),c=i(71657),d=i(15861),u=i(1977),p=i(8027);function g(e){return(0,p.ZP)("MuiDialogContentText",e)}(0,u.Z)("MuiDialogContentText",["root"]);var m=i(85893);let h=["children","className"],f=e=>{let{classes:t}=e,i=(0,s.Z)({root:["root"]},g,t);return(0,a.Z)({},t,i)},v=(0,l.ZP)(d.Z,{shouldForwardProp:e=>(0,l.FO)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),x=n.forwardRef(function(e,t){let i=(0,c.Z)({props:e,name:"MuiDialogContentText"}),{className:n}=i,s=(0,r.Z)(i,h),l=f(s);return(0,m.jsx)(v,(0,a.Z)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:s,className:(0,o.Z)(l.root,n)},i,{classes:l}))});var Z=x},6514:function(e,t,i){"use strict";i.d(t,{Z:function(){return Z}});var r=i(63366),a=i(87462),n=i(67294),o=i(86010),s=i(58510),l=i(90948),c=i(71657),d=i(1977),u=i(8027);function p(e){return(0,u.ZP)("MuiDialogContent",e)}(0,d.Z)("MuiDialogContent",["root","dividers"]);var g=i(4472),m=i(85893);let h=["className","dividers"],f=e=>{let{classes:t,dividers:i}=e;return(0,s.Z)({root:["root",i&&"dividers"]},p,t)},v=(0,l.ZP)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,i.dividers&&t.dividers]}})(({theme:e,ownerState:t})=>(0,a.Z)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},t.dividers?{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}:{[`.${g.Z.root} + &`]:{paddingTop:0}})),x=n.forwardRef(function(e,t){let i=(0,c.Z)({props:e,name:"MuiDialogContent"}),{className:n,dividers:s=!1}=i,l=(0,r.Z)(i,h),d=(0,a.Z)({},i,{dividers:s}),u=f(d);return(0,m.jsx)(v,(0,a.Z)({className:(0,o.Z)(u.root,n),ownerState:d,ref:t},l))});var Z=x},37645:function(e,t,i){"use strict";var r=i(87462),a=i(63366),n=i(67294),o=i(86010),s=i(58510),l=i(15861),c=i(90948),d=i(71657),u=i(4472),p=i(34182),g=i(85893);let m=["className","id"],h=e=>{let{classes:t}=e;return(0,s.Z)({root:["root"]},u.a,t)},f=(0,c.ZP)(l.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),v=n.forwardRef(function(e,t){let i=(0,d.Z)({props:e,name:"MuiDialogTitle"}),{className:s,id:l}=i,c=(0,a.Z)(i,m),u=h(i),{titleId:v=l}=n.useContext(p.Z);return(0,g.jsx)(f,(0,r.Z)({component:"h2",className:(0,o.Z)(u.root,s),ownerState:i,ref:t,variant:"h6",id:null!=l?l:v},c))});t.Z=v},4472:function(e,t,i){"use strict";i.d(t,{a:function(){return n}});var r=i(1977),a=i(8027);function n(e){return(0,a.ZP)("MuiDialogTitle",e)}let o=(0,r.Z)("MuiDialogTitle",["root"]);t.Z=o},74365:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/apps/course/list",function(){return i(49533)}])},3813:function(e,t,i){"use strict";i.d(t,{H:function(){return r}});let r={string:"text",email:"email",number:"number",date:"date","datetime-local":"datetime-local"}},44308:function(e,t,i){"use strict";let r;var a=i(64529),n=i(782),o=i(55277),s=i(86501),l=i(7688);let c="/courses",d=(0,a.Ue)((0,n.$e)({course:{id:null,list:[],total:0,page:1,size:10,search:null,paginate:!0,chats:[],selectedChat:{}}},(e,t)=>({get:{list:async()=>{let{course:{page:i,size:r,search:a,paginate:n}}=t();s.ZP.promise(o.ZP.get(c,{query:{page:i,limit:r,search:a}}),{loading:"fetching...",success:t=>(console.log("res",t),e(e=>{var i;return{course:{...e.course,list:null==t?void 0:t.data.courses,total:null==t?void 0:null===(i=t.data)||void 0===i?void 0:i.metaData.total}}}),(null==t?void 0:t.message)||"fetched"),error:e=>e})},paginate:t=>{let{page:i,size:a,search:n,paginate:o}=t;e(e=>({course:{...e.course,search:n||""}})),clearTimeout(r);let s=()=>{e(e=>({course:{...e.course,page:i||e.course.page,size:a||e.course.size,search:n||e.course.search,paginate:null==o||o}})),d.getState().get.list()};if(n){r=setTimeout(()=>{s()},1e3),e(e=>({course:{...e.course,search:n}}));return}s()},chats:async t=>{var i;let r=null===(i=(0,l.P)())||void 0===i?void 0:i.id;s.ZP.promise(o.ZP.post("/chat/course",{courseId:t,adminId:r}),{loading:"",success:t=>(console.log("res",t),e(e=>({course:{...e.course,chats:t.data}})),""),error:t=>(e(e=>({course:{...e.course,loading:!1}})),t)})}},selectChat:t=>{e(e=>({course:{...e.course,selectedChat:e.course.chats.find(e=>(null==e?void 0:e.chat._id)==t)}}))},refreshChat:async e=>{var i,r;null===(i=(0,l.P)())||void 0===i||i.id;let a=null===(r=t().course.selectedChat)||void 0===r?void 0:r.chat._id;await d.getState().get.chats(e),await d.getState().selectChat(a)},sendChat:i=>{var r,a;let n=null===(r=(0,l.P)())||void 0===r?void 0:r.id,c=null===(a=t().course.selectedChat)||void 0===a?void 0:a.chat._id;s.ZP.promise(o.ZP.post("/chat/send",{chatId:c,message:i,senderId:n}),{loading:"Sending message...",success:t=>(console.log("res",t),e(e=>({course:{...e.course,selectedChat:{...e.course.selectedChat,chat:{...e.course.selectedChat.chat,messages:[...e.course.selectedChat.chat.messages,t.data]}}}})),"Message sent"),error:e=>e})},select:t=>e(e=>({course:{...e.course,id:t}})),add:async e=>{let i=t().course.id,r=s.ZP.promise(i?o.ZP.patch("".concat(c,"/").concat(i),e,{formData:!0}):o.ZP.post("".concat(c,"/register"),e,{formData:!0}),{loading:i?"Updating":"Adding",success:e=>(d.getState().get.paginate({}),null==e?void 0:e.message),error:e=>e});return r},delete:async()=>{let e=t().course.id;if(!e)return s.ZP.error("Please select a item");s.ZP.promise(o.ZP.del("".concat(c,"/").concat(e)),{loading:"deleting",success:e=>(d.getState().get.paginate({}),null==e?void 0:e.message),error:e=>e})}})));t.Z=d},49533:function(e,t,i){"use strict";i.r(t);var r=i(85893),a=i(67294),n=i(87357),o=i(86886),s=i(66242),l=i(34386),c=i(18972),d=i(50135),u=i(93946),p=i(94054),g=i(18360),m=i(78818),h=i(63730),f=i(82229),v=i(11057),x=i(50657),Z=i(37645),y=i(6514),j=i(58951),C=i(5306),w=i(56815),b=i(31425),P=i(16310),S=i(87536),D=i(47533),M=i(3813),_=i(42298),N=i(84698),R=i(11163),I=i(44308);let O=e=>{var t;let{read:i,write:O,update:z,del:T}=e,A="Course",k={_id:P.Z_().nullable().meta({hidden:!0}),course_name:P.Z_().required("Course name is required"),slug:P.Z_().required("Slug is required"),category:P.Z_().required("Category is required").oneOf(["programming","design","marketing","technical"],"Invalid category").default("programming"),poster:P.nK().required("Poster is required").meta({type:"file",attr:{accept:"image/x-png,image/gif,image/jpeg"}})},W=P.Ry().shape(k),[E,q]=(0,a.useState)(!1),[F,H]=(0,a.useState)({page:0,pageSize:10}),Y=(0,I.Z)(),[L,U]=(0,a.useState)(W.getDefault()),[$,X]=(0,a.useState)(W.describe()),{control:V,handleSubmit:B,formState:{errors:K},getValues:Q,setValue:G,reset:J}=(0,S.cI)({defaultValues:L,mode:"onChange",resolver:(0,D.X)(W)});(0,a.useEffect)(()=>{Y.get.paginate({size:10,page:1})},[]);let ee=e=>{Y.get.paginate({search:e})},et=async(e,t)=>{if(e)U(W.getDefault()),X(W.describe()),J(),Y.select(null);else{let e=W.getDefault();for(let i in U(e),X(W.describe()),Y.select(null==t?void 0:t._id),e)G(i,t[i])}q(!0)},ei=()=>{q(!1)},er=[{flex:.2,field:"_id",minWidth:100,headerName:"Course ID"},{flex:.2,field:"poster",minWidth:100,headerName:"Poster",renderCell:e=>{var t;return(0,r.jsx)("img",{src:null===(t=e.value)||void 0===t?void 0:t.url,alt:"Poster",style:{width:60,height:40,objectFit:"cover",borderRadius:8}})}},{flex:.2,field:"course_name",minWidth:180,headerName:"Course Name"},{flex:.15,field:"slug",minWidth:150,headerName:"Slug"},{flex:.3,field:"summary",minWidth:300,headerName:"Summary"},{flex:.15,field:"category",minWidth:120,headerName:"Category"},{flex:.2,field:"updatedAt",minWidth:150,headerName:"Last Updated",valueFormatter:e=>{let{value:t}=e;return t?new Date(t).toLocaleDateString():""}},{flex:.1,minWidth:380,sortable:!1,field:"actions",headerName:"Actions",renderCell:e=>{let{row:t}=e;return(0,r.jsxs)(n.Z,{sx:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,r.jsx)(v.Z,{sx:{mr:2},variant:"contained",onClick:()=>{en.push("/apps/course/".concat(null==t?void 0:t._id,"/chat"))},children:"Chats"}),(0,r.jsx)(v.Z,{sx:{mr:2},variant:"contained",onClick:()=>{en.push("/apps/course/".concat(null==t?void 0:t._id,"/section"))},children:"Add / Update  Lectures"}),(0,r.jsx)(l.Z,{title:"Edit ".concat(A),children:(0,r.jsx)(u.Z,{size:"small",onClick:()=>{for(let e in L)Y.select(null==t?void 0:t.id),G(e,t[e]);et(!1,t)},children:(0,r.jsx)(h.Z,{icon:"mdi:edit-outline",fontSize:20})})})]})}}],ea=async e=>{await Y.add(e),ei()},en=(0,R.useRouter)();return(0,r.jsx)(f.Z,{children:(0,r.jsx)(o.ZP,{container:!0,spacing:6,children:(0,r.jsxs)(o.ZP,{item:!0,xs:12,children:[(0,r.jsxs)(s.Z,{children:[(0,r.jsxs)(n.Z,{sx:{p:5,pb:3,width:"100%",display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsxs)(g.Z,{size:"small",displayEmpty:!0,defaultValue:"",sx:{mr:4,mb:2},disabled:!0,renderValue:e=>0===e.length?"Actions":e,children:[(0,r.jsx)(c.Z,{disabled:!0,children:"Actions"}),(0,r.jsx)(c.Z,{value:"Delete",children:"Delete"}),(0,r.jsx)(c.Z,{value:"Edit",children:"Edit"}),(0,r.jsx)(c.Z,{value:"Send",children:"Send"})]}),(0,r.jsxs)(n.Z,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center"},children:[(0,r.jsx)(d.Z,{size:"small",sx:{mr:4,mb:2},placeholder:"Search ".concat(A),onChange:e=>ee(e.target.value)}),(0,r.jsxs)(v.Z,{sx:{mb:2},variant:"contained",onClick:()=>{et(!0)},children:["Create ",A]})]})]}),(0,r.jsx)(m._,{autoHeight:!0,pagination:!0,rows:Y.course.list,columns:er,getRowId:e=>e._id,disableRowSelectionOnClick:!0,pageSizeOptions:[10,25,50],paginationMode:"server",paginationModel:{page:Y.course.page-1,pageSize:Y.course.size},onPaginationModelChange:e=>{let{page:t,pageSize:i}=e;(t!=Y.course.page-1||i!=Y.course.size)&&Y.get.paginate({page:t+1,size:i})},onColumnOrderChange:e=>{console.log("e: ",e)},rowCount:Y.course.total})]}),(0,r.jsxs)(x.Z,{open:E,onClose:ei,"aria-labelledby":"user-view-edit","aria-describedby":"user-view-edit-description",sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650}},children:[(0,r.jsxs)(Z.Z,{id:"user-view-edit",sx:{textAlign:"center",fontSize:"1.5rem !important",px:e=>["".concat(e.spacing(5)," !important"),"".concat(e.spacing(15)," !important")],pt:e=>["".concat(e.spacing(8)," !important"),"".concat(e.spacing(12.5)," !important")]},children:[(null===(t=Y.course)||void 0===t?void 0:t.id)?"Edit":"Add"," ",A]}),(0,r.jsxs)(y.Z,{sx:{pb:e=>"".concat(e.spacing(8)," !important"),px:e=>["".concat(e.spacing(5)," !important"),"".concat(e.spacing(15)," !important")]},children:[(0,r.jsx)(j.Z,{variant:"body2",id:"user-view-edit-description",sx:{textAlign:"center",mb:7}}),(0,r.jsx)("form",{onSubmit:B(ea),children:(0,r.jsx)(o.ZP,{container:!0,spacing:6,children:Object.keys($.fields).map(e=>{var t,i,a,n;let s=$.fields[e];if(null==s?void 0:null===(t=s.meta)||void 0===t?void 0:t.hidden)return(0,r.jsx)(r.Fragment,{});let l=s.label;l||(l=(l=e.replaceAll("_"," ")).charAt(0).toUpperCase()+l.slice(1));let c=M.H[s.type];return(null===(i=s.meta)||void 0===i?void 0:i.type)==="file"&&(c=null===(n=s.meta)||void 0===n?void 0:n.type),"boolean"==s.type&&(s.oneOf=[{value:1,label:"YES"},{value:0,label:"NO"}]),(0,r.jsx)(o.ZP,{item:!0,xs:12,sm:12,children:(0,r.jsxs)(p.Z,{fullWidth:!0,children:[(0,r.jsx)(S.Qr,{name:e,control:V,rules:{required:!0},render:t=>{let{field:{value:i,onChange:a}}=t;try{if(s.oneOf.length)return(0,r.jsx)(C.Z,{options:[...s.oneOf],onChange:(t,i)=>{G(e,"object"==typeof i?null==i?void 0:i.value:i)},getOptionLabel:e=>"object"==typeof e?e.label:e,value:s.oneOf.find(e=>e.value==i)||i,renderInput:e=>(0,r.jsx)(d.Z,{...e,label:l})});if("file"==c){var n;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.Z,{variant:"outlined",fullWidth:!0,size:"medium",color:"primary",children:(0,r.jsxs)("label",{htmlFor:"user-view-".concat(e),style:{width:"100%",height:"100%",display:"flex",justifyContent:"start",alignItems:"center",cursor:"pointer"},children:[(0,r.jsx)(h.Z,{icon:"mdi:file"}),(0,r.jsx)("p",{style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",margin:"0 0 0 5px"},children:(null==i?void 0:i.name)||l})]})}),(0,r.jsx)("input",{type:"file",id:"user-view-".concat(e),hidden:!0,onChange:t=>{var i;let r=null===(i=t.target.files)||void 0===i?void 0:i[0];r&&G(e,r)},...null==s?void 0:null===(n=s.meta)||void 0===n?void 0:n.attr})]})}if("date"===c)return(0,r.jsx)(N.t,{label:l,value:i,onChange:t=>{G(e,(0,_.default)(new Date(t),"yyyy-MM-dd HH:mm:ss"))}})}catch(t){return console.error(e),(0,r.jsx)(r.Fragment,{})}return(0,r.jsx)(d.Z,{value:i,label:l,onChange:"datetime-local"==c?t=>{G(e,(0,_.default)(new Date(t.target.value),"yyyy-MM-dd HH:mm:ss"))}:a,type:c,error:!!K[e]})}}),K[e]&&(0,r.jsx)(w.Z,{sx:{color:"error.main"},id:"validation-schema-first-name",children:null===(a=K[e])||void 0===a?void 0:a.message})]})})})})})]}),(0,r.jsxs)(b.Z,{sx:{justifyContent:"center",px:e=>["".concat(e.spacing(5)," !important"),"".concat(e.spacing(15)," !important")],pb:e=>["".concat(e.spacing(8)," !important"),"".concat(e.spacing(12.5)," !important")]},children:[(0,r.jsx)(v.Z,{variant:"contained",sx:{mr:2},onClick:B(ea),children:"Submit"}),(0,r.jsx)(v.Z,{variant:"outlined",color:"secondary",onClick:ei,children:"Cancel"})]})]})]})})})};O.moduleId=3,O.gameIds=[1,2],t.default=O},84698:function(e,t,i){"use strict";i.d(t,{t:function(){return c}});var r=i(85893),a=i(9198),n=i.n(a),o=i(67294),s=i(82229),l=i(92313);let c=e=>{let{label:t,value:i,onChange:a}=e,[c,d]=(0,o.useState)(new Date);return(0,r.jsx)(s.Z,{children:(0,r.jsx)(n(),{showYearDropdown:!0,showMonthDropdown:!0,selected:c,dateFormat:"yyyy-MM-dd h:mm aa",showTimeInput:!0,placeholderText:"MM-DD-YYYY",value:i,onChange:(e,t)=>{d(e),a(e,t)},customInput:(0,r.jsx)(l.Z,{label:t,style:{width:"100%"}})})})}},92313:function(e,t,i){"use strict";var r=i(85893),a=i(67294),n=i(50135);let o=(0,a.forwardRef)((e,t)=>{let{...i}=e,{label:a,readOnly:o,style:s}=i;return(0,r.jsx)(n.Z,{inputRef:t,...i,...s&&{style:s},label:a||"",...o&&{inputProps:{readOnly:!0}}})});t.Z=o},459:function(){}},function(e){e.O(0,[4386,7536,2216,3863,9198,7693,8818,2229,9774,2888,179],function(){return e(e.s=74365)}),_N_E=e.O()}]);