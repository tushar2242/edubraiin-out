(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6015],{66031:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/apps/chat/list",function(){return n(17222)}])},3813:function(e,t,n){"use strict";n.d(t,{H:function(){return a}});let a={string:"text",email:"email",number:"number",date:"date","datetime-local":"datetime-local"}},26531:function(e,t,n){"use strict";let a;var i=n(64529),l=n(782),r=n(55277),s=n(86501);let d="/students",o=(0,i.Ue)((0,l.$e)({student:{id:null,list:[],total:0,page:1,size:10,search:null,paginate:!0,details:null}},(e,t)=>({get:{list:async()=>{let{student:{page:n,size:a,search:i,paginate:l}}=t();s.ZP.promise(r.ZP.get(d,{query:{page:n,limit:a,search:i}}),{loading:"fetching...",success:t=>(console.log("res",t),e(e=>{var n;return{student:{...e.student,list:null==t?void 0:t.data.students,total:null===(n=null==t?void 0:t.data.metaData)||void 0===n?void 0:n.total}}}),(null==t?void 0:t.message)||"fetched"),error:e=>e})},paginate:t=>{let{page:n,size:i,search:l,paginate:r}=t;e(e=>({student:{...e.student,search:l||""}})),clearTimeout(a);let s=()=>{e(e=>({student:{...e.student,page:n||e.student.page,size:i||e.student.size,search:l||e.student.search,paginate:null==r||r}})),o.getState().get.list()};if(l){a=setTimeout(()=>{s()},1e3),e(e=>({student:{...e.student,search:l}}));return}s()},student:async t=>{let n=s.ZP.promise(r.ZP.get("".concat(d,"/").concat(t)),{loading:"fetching...",success:t=>(console.log("res",t),e(e=>({student:{...e.student,details:null==t?void 0:t.data}})),(null==t?void 0:t.message)||"fetched"),error:e=>e});return n}},select:t=>e(e=>({student:{...e.student,id:t}})),add:async e=>{let n=t().student.id,a=s.ZP.promise(n?r.ZP.put("".concat(d,"/").concat(n),e,{formData:!0}):r.ZP.post(d,e,{formData:!0}),{loading:n?"Updating":"Adding",success:e=>(o.getState().get.paginate({}),null==e?void 0:e.message),error:e=>e});return a},delete:async()=>{let e=t().student.id;if(!e)return s.ZP.error("Please select a item");s.ZP.promise(r.ZP.del("".concat(d,"/").concat(e)),{loading:"deleting",success:e=>(o.getState().get.paginate({}),null==e?void 0:e.message),error:e=>e})}})));t.Z=o},17222:function(e,t,n){"use strict";n.r(t);var a=n(85893),i=n(67294),l=n(87357),r=n(86886),s=n(66242),d=n(34386),o=n(18972),c=n(50135),u=n(93946),m=n(94054),p=n(18360),g=n(78818),h=n(63730),f=n(82229),x=n(23795),v=n(50657),j=n(37645),Z=n(6514),y=n(58951),b=n(5306),w=n(11057),C=n(56815),P=n(31425),S=n(16310),D=n(87536),_=n(47533),N=n(3813),E=n(42298),z=n(84698),A=n(11163),I=n(26531),O=n(90948);let M={id:S.Rx().nullable().meta({hidden:!0}),name:S.Z_().required("Name is required"),createdAt:S.hT().required("Enrollment Date is required").label("Enrollment Date").meta({type:"date"}),email:S.Z_().email("Invalid email").required("Email is required"),contact:S.Z_().required("Contact Number is required"),amountPaid:S.Rx().required("Amount paid is required"),avatar:S.Z_().nullable().meta({type:"file",attr:{accept:"image/x-png,image/gif,image/jpeg"}})},W=(0,O.ZP)(x.Z)(e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",textDecoration:"none",marginRight:t.spacing(8)}}),q=S.Ry().shape(M),R=e=>{var t;let{read:n,write:x,update:S,del:O}=e,M="Students",[R,k]=(0,i.useState)(!1),H=(0,I.Z)(),[T,F]=(0,i.useState)(q.getDefault()),[Y,U]=(0,i.useState)(q.describe()),{control:X,handleSubmit:L,formState:{errors:V},getValues:G,setValue:Q,reset:$}=(0,D.cI)({defaultValues:T,mode:"onChange",resolver:(0,_.X)(q)});(0,i.useEffect)(()=>{H.get.paginate({size:10,page:1})},[]);let B=e=>{H.get.paginate({search:e})},J=async(e,t)=>{if(e)F(q.getDefault()),U(q.describe()),$(),H.select(null);else{let e=q.getDefault();for(let n in F(e),U(q.describe()),e)Q(n,t[n])}k(!0)},K=()=>{k(!1)},ee=[{flex:.2,field:"name",minWidth:150,headerName:"Name",renderCell:e=>{let{row:t}=e;return(0,a.jsx)(W,{href:"/apps/chat/".concat(null==t?void 0:t._id),children:null==t?void 0:t.name})}},{flex:.2,field:"createdAt",minWidth:150,headerName:"Enrollment Date",valueFormatter:e=>{let{value:t}=e;return t?new Date(t).toLocaleDateString():""}},{flex:.2,field:"email",minWidth:200,headerName:"Registered Email Id"},{flex:.2,field:"contact",minWidth:150,headerName:"Contact Number"},{flex:.15,field:"amountPaid",headerName:"Amount paid",minWidth:130},{flex:.15,field:"enrolledCoursesCount",headerName:"No of courses enrolled",minWidth:180,valueGetter:e=>{var t;return(null===(t=e.row.enrolledCourses)||void 0===t?void 0:t.length)||0}},{flex:.2,field:"avatar",minWidth:100,headerName:"Avatar",renderCell:e=>{var t;return(0,a.jsx)("img",{src:null===(t=e.value)||void 0===t?void 0:t.url,alt:"Avatar",style:{width:40,height:40,borderRadius:"50%"}})}},{flex:.1,minWidth:130,sortable:!1,field:"actions",headerName:"Actions",renderCell:e=>{let{row:t}=e;return(0,a.jsx)(l.Z,{sx:{display:"flex",alignItems:"center"},children:(0,a.jsx)(d.Z,{title:"Edit ".concat(M),children:(0,a.jsx)(u.Z,{size:"small",onClick:()=>{for(let e in T)H.select(null==t?void 0:t.id),Q(e,t[e]);J(!1,t)},children:(0,a.jsx)(h.Z,{icon:"mdi:edit-outline",fontSize:20})})})})}}],et=async e=>{await H.add(e),K()};return(0,A.useRouter)(),(0,a.jsx)(f.Z,{children:(0,a.jsx)(r.ZP,{container:!0,spacing:6,children:(0,a.jsxs)(r.ZP,{item:!0,xs:12,children:[(0,a.jsxs)(s.Z,{children:[(0,a.jsxs)(l.Z,{sx:{p:5,pb:3,width:"100%",display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},children:[(0,a.jsxs)(p.Z,{size:"small",displayEmpty:!0,defaultValue:"",sx:{mr:4,mb:2},disabled:!0,renderValue:e=>0===e.length?"Actions":e,children:[(0,a.jsx)(o.Z,{disabled:!0,children:"Actions"}),(0,a.jsx)(o.Z,{value:"Delete",children:"Delete"}),(0,a.jsx)(o.Z,{value:"Edit",children:"Edit"}),(0,a.jsx)(o.Z,{value:"Send",children:"Send"})]}),(0,a.jsx)(l.Z,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center"},children:(0,a.jsx)(c.Z,{size:"small",sx:{mr:4,mb:2},placeholder:"Search ".concat(M),onChange:e=>B(e.target.value)})})]}),(0,a.jsx)(g._,{autoHeight:!0,pagination:!0,rows:H.student.list,columns:ee,getRowId:e=>e._id,disableRowSelectionOnClick:!0,pageSizeOptions:[10,25,50],paginationMode:"server",paginationModel:{page:H.student.page-1,pageSize:H.student.size},onPaginationModelChange:e=>{let{page:t,pageSize:n}=e;(t!=H.student.page-1||n!=H.student.size)&&H.get.paginate({page:t+1,size:n})},onColumnOrderChange:e=>{console.log("e: ",e)},rowCount:H.student.total})]}),(0,a.jsxs)(v.Z,{open:R,onClose:K,"aria-labelledby":"user-view-edit","aria-describedby":"user-view-edit-description",sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650}},children:[(0,a.jsxs)(j.Z,{id:"user-view-edit",sx:{textAlign:"center",fontSize:"1.5rem !important",px:e=>["".concat(e.spacing(5)," !important"),"".concat(e.spacing(15)," !important")],pt:e=>["".concat(e.spacing(8)," !important"),"".concat(e.spacing(12.5)," !important")]},children:[(null===(t=H.student)||void 0===t?void 0:t.id)?"Edit":"Add"," ",M]}),(0,a.jsxs)(Z.Z,{sx:{pb:e=>"".concat(e.spacing(8)," !important"),px:e=>["".concat(e.spacing(5)," !important"),"".concat(e.spacing(15)," !important")]},children:[(0,a.jsx)(y.Z,{variant:"body2",id:"user-view-edit-description",sx:{textAlign:"center",mb:7}}),(0,a.jsx)("form",{onSubmit:L(et),children:(0,a.jsx)(r.ZP,{container:!0,spacing:6,children:Object.keys(Y.fields).map(e=>{var t,n,i,l;let s=Y.fields[e];if(null==s?void 0:null===(t=s.meta)||void 0===t?void 0:t.hidden)return(0,a.jsx)(a.Fragment,{});let d=s.label;d||(d=(d=e.replaceAll("_"," ")).charAt(0).toUpperCase()+d.slice(1));let o=N.H[s.type];return(null===(n=s.meta)||void 0===n?void 0:n.type)==="file"&&(o=null===(l=s.meta)||void 0===l?void 0:l.type),"boolean"==s.type&&(s.oneOf=[{value:1,label:"YES"},{value:0,label:"NO"}]),(0,a.jsx)(r.ZP,{item:!0,xs:12,sm:12,children:(0,a.jsxs)(m.Z,{fullWidth:!0,children:[(0,a.jsx)(D.Qr,{name:e,control:X,rules:{required:!0},render:t=>{let{field:{value:n,onChange:i}}=t;try{if(s.oneOf.length)return(0,a.jsx)(b.Z,{options:[...s.oneOf],onChange:(t,n)=>{Q(e,"object"==typeof n?null==n?void 0:n.value:n)},getOptionLabel:e=>"object"==typeof e?e.label:e,value:s.oneOf.find(e=>e.value==n)||n,renderInput:e=>(0,a.jsx)(c.Z,{...e,label:d})});if("file"==o){var l,r;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.Z,{variant:"outlined",fullWidth:!0,size:"large",color:"secondary",children:(0,a.jsxs)("label",{htmlFor:"user-view-".concat(e),style:{width:"100%",height:"100%",display:"flex",justifyContent:"start",alignItems:"center",cursor:"pointer"},children:[(0,a.jsx)(h.Z,{icon:"mdi:cloud-upload-outline"}),(0,a.jsx)("p",{style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",margin:"0 0 0 5px"},children:(null==n?void 0:n.length)>0&&(null===(l=n[0])||void 0===l?void 0:l.name)||d})]})}),(0,a.jsx)("input",{type:"file",id:"user-view-".concat(e),hidden:!0,multiple:!0,onChange:t=>{let n=t.target.files;n&&(Q(e,n),console.log(n))},...null==s?void 0:null===(r=s.meta)||void 0===r?void 0:r.attr})]})}if("date"===o)return(0,a.jsx)(z.t,{label:d,value:n,onChange:t=>{Q(e,(0,E.default)(new Date(t),"yyyy-MM-dd HH:mm:ss"))}})}catch(t){return console.error(e),(0,a.jsx)(a.Fragment,{})}return(0,a.jsx)(c.Z,{value:n,label:d,onChange:"datetime-local"==o?t=>{Q(e,(0,E.default)(new Date(t.target.value),"yyyy-MM-dd HH:mm:ss"))}:i,type:o,error:!!V[e]})}}),V[e]&&(0,a.jsx)(C.Z,{sx:{color:"error.main"},id:"validation-schema-first-name",children:null===(i=V[e])||void 0===i?void 0:i.message})]})})})})})]}),(0,a.jsxs)(P.Z,{sx:{justifyContent:"center",px:e=>["".concat(e.spacing(5)," !important"),"".concat(e.spacing(15)," !important")],pb:e=>["".concat(e.spacing(8)," !important"),"".concat(e.spacing(12.5)," !important")]},children:[(0,a.jsx)(w.Z,{variant:"contained",sx:{mr:2},onClick:L(et),children:"Submit"}),(0,a.jsx)(w.Z,{variant:"outlined",color:"secondary",onClick:K,children:"Cancel"})]})]})]})})})};R.moduleId=3,R.gameIds=[1,2],t.default=R},84698:function(e,t,n){"use strict";n.d(t,{t:function(){return o}});var a=n(85893),i=n(9198),l=n.n(i),r=n(67294),s=n(82229),d=n(92313);let o=e=>{let{label:t,value:n,onChange:i}=e,[o,c]=(0,r.useState)(new Date);return(0,a.jsx)(s.Z,{children:(0,a.jsx)(l(),{showYearDropdown:!0,showMonthDropdown:!0,selected:o,dateFormat:"yyyy-MM-dd h:mm aa",showTimeInput:!0,placeholderText:"MM-DD-YYYY",value:n,onChange:(e,t)=>{c(e),i(e,t)},customInput:(0,a.jsx)(d.Z,{label:t,style:{width:"100%"}})})})}},92313:function(e,t,n){"use strict";var a=n(85893),i=n(67294),l=n(50135);let r=(0,i.forwardRef)((e,t)=>{let{...n}=e,{label:i,readOnly:r,style:s}=n;return(0,a.jsx)(l.Z,{inputRef:t,...n,...s&&{style:s},label:i||"",...r&&{inputProps:{readOnly:!0}}})});t.Z=r}},function(e){e.O(0,[4386,7536,2216,3863,9198,7693,8818,7288,2229,9774,2888,179],function(){return e(e.s=66031)}),_N_E=e.O()}]);